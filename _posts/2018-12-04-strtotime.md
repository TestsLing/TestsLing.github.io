---
layout:     post
title:      "ä»¤äººå›°æƒ‘çš„strtotime"
subtitle:   "æœ‰æ„æ€çš„å°å‘"
date:       2018-12-04 14:00:00
author:     "æ†§æ†¬"
header-img: "img/post-bg-halting.jpg"
header-mask: 0.3
catalog:    true
tags:
  - php
---

ç»å¸¸ä¼šæœ‰äººè¢«strtotimeç»“åˆ-1 month, +1 month, next monthçš„æ—¶å€™æå¾—å¾ˆå›°æƒ‘, ç„¶åå°±ä¼šè§‰å¾—è¿™ä¸ªå‡½æ•°æœ‰ç‚¹ä¸é‚£ä¹ˆé è°±, åŠ¨ä¸åŠ¨å°±å‡ºé—®é¢˜. ç”¨çš„æ—¶å€™å°±ä¼šå¾ˆæ…Œâ€¦

> æ‰§è¡Œä»£ç :
> date("Y-m-d",strtotime("-1 month"))
> æ€ä¹ˆè¾“å‡ºæ˜¯2018-07-01?

å¥½çš„å§, è™½ç„¶è¿™ä¸ªé—®é¢˜çœ‹èµ·æ¥å¾ˆè¿·æƒ‘, ä½†ä»å†…éƒ¨é€»è¾‘ä¸Šæ¥è¯´å‘¢, å…¶å®æ˜¯â€å¯¹â€çš„, ä½ å…ˆåˆ«ç€æ€¥å“ˆ, è®©æˆ‘æ…¢æ…¢è®²:

æˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸‹dateå†…éƒ¨çš„å¯¹äºè¿™ç§äº‹æƒ…çš„å¤„ç†é€»è¾‘:

+ 1. å…ˆåš-1 month, é‚£ä¹ˆå½“å‰æ˜¯07-31, å‡å»ä¸€ä»¥åå°±æ˜¯06-31.
+ 2. å†åšæ—¥æœŸè§„èŒƒåŒ–, å› ä¸º6æœˆæ²¡æœ‰31å·, æ‰€ä»¥å°±å¥½åƒ2ç‚¹60ç­‰äº3ç‚¹ä¸€æ ·, 6æœˆ31å°±ç­‰äºäº†7æœˆ1
æ˜¯ä¸æ˜¯é€»è¾‘å¾ˆâ€æ¸…æ™°â€å‘¢? æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨éªŒè¯ç¬¬äºŒä¸ªæ­¥éª¤, æ¯”å¦‚:

```
var_dump(date("Y-m-d", strtotime("2017-06-31")));
//è¾“å‡º2017-07-01
```

ä¹Ÿå°±æ˜¯è¯´, åªè¦æ¶‰åŠåˆ°å¤§å°æœˆçš„æœ€åä¸€å¤©, éƒ½å¯èƒ½ä¼šæœ‰è¿™ä¸ªè¿·æƒ‘, æˆ‘ä»¬ä¹Ÿå¯ä»¥å¾ˆè½»æ¾çš„éªŒè¯ç±»ä¼¼çš„å…¶ä»–æœˆä»½, å°è¯è¿™ä¸ªç»“è®º:

```
var_dump(date("Y-m-d", strtotime("-1 month", strtotime("2017-03-31"))));
//è¾“å‡º2017-03-03
var_dump(date("Y-m-d", strtotime("+1 month", strtotime("2017-08-31"))));
//è¾“å‡º2017-10-01
var_dump(date("Y-m-d", strtotime("next month", strtotime("2017-01-31"))));
//è¾“å‡º2017-03-03
var_dump(date("Y-m-d", strtotime("last month", strtotime("2017-03-31"))));
//è¾“å‡º2017-03-03
é‚£æ€ä¹ˆåŠå‘¢?
```

ä»PHP5.3å¼€å§‹å‘¢, dateæ–°å¢äº†ä¸€ç³»åˆ—ä¿®æ­£çŸ­è¯­, æ¥æ˜ç¡®è¿™ä¸ªé—®é¢˜, é‚£å°±æ˜¯â€first day ofâ€ å’Œ â€œlast day ofâ€, ä¹Ÿå°±æ˜¯ä½ å¯ä»¥é™å®šå¥½ä¸è¦è®©dateè‡ªåŠ¨â€è§„èŒƒåŒ–â€:

```
var_dump(date("Y-m-d", strtotime("last day of -1 month", strtotime("2017-03-31"))));
//è¾“å‡º2017-02-28
var_dump(date("Y-m-d", strtotime("first day of +1 month", strtotime("2017-08-31"))));
////è¾“å‡º2017-09-01
var_dump(date("Y-m-d", strtotime("first day of next month", strtotime("2017-01-31"))));
////è¾“å‡º2017-02-01
var_dump(date("Y-m-d", strtotime("last day of last month", strtotime("2017-03-31"))));
////è¾“å‡º2017-02-28
```

é‚£å¦‚æœæ˜¯5.3ä¹‹å‰çš„ç‰ˆæœ¬(è¿˜æœ‰äººç”¨ä¹ˆ?), ä½ å¯ä»¥ä½¿ç”¨mktimeä¹‹ç±»çš„, æŠŠæ‰€æœ‰çš„æ—¥å­å¿½ç•¥æ‰, æ¯”å¦‚éƒ½é™å®šä¸ºæ¯æœˆ1å·å°±å¯ä»¥äº†, åªä¸è¿‡å°±ä¸å¦‚ç›´æ¥ç”¨first dayæ¥çš„æ›´åŠ ä¼˜é›….

ç°åœ¨, ææ¸…æ¥šäº†å†…éƒ¨åŸç†, æ˜¯ä¸æ˜¯å°±ä¸æ…Œäº†?  ğŸ™‚

è½¬è½½è‡ªé¸Ÿå“¥åšå®¢ è§‰å¾—è¿™ä¸ªéå¸¸æœ‰æ„æ€ å¸Œæœ›åšä¸ªç¬”è®° 
<a href="http://www.laruence.com/2018/07/31/3207.html">Yuan</a> 
